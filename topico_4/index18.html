<html>

<head>
    <meta charset="utf-8">
    <title>Formulário para Calculadora - 18º Exemplo</title>
    <script src="js/jquery-3.5.1.min.js"></script>
    <style>
        body {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #0a192f;
            margin: 0;
            font-family: 'Noto Sans', sans-serif;
            color: #e0e0e0;
        }

        .form {
            padding: 20px;
            background: #112240;
            border: 2px solid #233554;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .formcontrol {
            margin: 10px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        input {
            font-size: 18px;
            padding: 10px;
            border: none;
            outline: none;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
        }

        input[type="text"] {
            width: 300px;
            height: 40px;
            background: #1e2a47;
            color: #e0e0e0;
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 15px;
            cursor: default;
            border: 2px solid #233554;
        }

        .num {
            width: 64px;
            height: 64px;
            background-color: #233554;
            color: #e0e0e0;
            font-size: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .num:hover {
            background-color: #0dcaf0;
            color: #112240;
        }

        .blue {
            background-color: #0dcaf0;
        }

        .pin {
            background-color: #f39cda;
        }

        .gre {
            background-color: #6cd968;
        }

        .pur {
            background-color: #8e63ff;
        }

        .ora {
            background-color: #f2a22b;
        }

        .num.blue:hover {
            background-color: #0a74d9;
        }

        .num.pin:hover {
            background-color: #d184bf;
        }

        .num.gre:hover {
            background-color: #5bbf58;
        }

        .num.pur:hover {
            background-color: #784ee2;
        }

        .num.ora:hover {
            background-color: #d48b22;
        }
    </style>

</head>

<body>
    <div class="form">

        <div class="formcontrol">
            <input type="text" value="" id="inputTexto" readonly size="100px">
        </div>
        <div class="formcontrol">
            <input type="button" class="num maincolor" value="7" id="btn7" class="botao">
            <input type="button" class="num maincolor" value="8" id="btn8" class="botao">
            <input type="button" class="num maincolor" value="9" id="btn9" class="botao">
            <input type="button" class="num blue" value="+" id="btnSoma" class="botao">
        </div>
        <div class="formcontrol">
            <input type="button" class="num maincolor" value="4" id="btn4" class="botao">
            <input type="button" class="num maincolor" value="5" id="btn5" class="botao">
            <input type="button" class="num maincolor" value="6" id="btn6" class="botao">
            <input type="button" class="num pin" value="-" id="btnSubtracao" class="botao">
        </div>

        <div class="formcontrol">
            <input type="button" class="num maincolor" value="1" id="btn1" class="botao">
            <input type="button" class="num maincolor" value="2" id="btn2" class="botao">
            <input type="button" class="num maincolor" value="3" id="btn3" class="botao">
            <input type="button" class="num gre" value="/" id="btnDivisao" class="botao">
        </div>
        <div class="formcontrol">
            <input type="button" class="num maincolor" value="0" id="btn0" class="botao">
            <input type="button" class="num maincolor" value="," id="btnVirgula" class="botao">
            <input type="button" class="num maincolor" value="C" id="btnReset" class="botao">
            <input type="button" class="num ora" value="*" id="btnMultiplicacao" class="botao">
        </div>
        <div class="formcontrol">
            <input type="button" class="num pur" value="=" id="btnIgual" style="width: 140px;">

            <input type="button" class="num maincolor" value="X^" id="btnPotenciaQuadrado" class="botao">

            <input type="button" class="num maincolor" value="√" id="btnRaiz" class="botao">

        </div>

    </div>

</body>
<script type="text/javascript">

    //Jquery permite para executar uma function após o click em um botão:

    $("#btnReset").click(function () {

        document.getElementById("inputTexto").value = "";

    });

    $("#btnVirgula").click(function () {

        //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
        var texto = document.getElementById("inputTexto").value;

        texto = texto + ".";

        document.getElementById("inputTexto").value = texto;

    });

    $("#btn0").click(function () {

        //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
        //recuperacao da informacao que está no visor.
        var texto = document.getElementById("inputTexto").value;

        //concatenacao do caracter
        texto = texto + "0";

        //atualizacao do visor.
        document.getElementById("inputTexto").value = texto;


    });

    $("#btn1").click(function () {

        //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
        //recuperacao da informacao que está no visor.
        var texto = document.getElementById("inputTexto").value;

        //concatenacao do caracter
        texto = texto + "1";

        //atualizacao do visor.
        document.getElementById("inputTexto").value = texto;

    });

    $("#btn2").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "2";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn3").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "3";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn4").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "4";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn5").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "5";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn6").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "6";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn7").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "7";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn8").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "8";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn9").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "9";
        document.getElementById("inputTexto").value = texto;
    });


    $("#btnSoma").click(function () {

        //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("+");
        if (posicao == -1) {
            //concatena o caracter + na variavel
            texto = texto + "+";

            //atualiza o input
            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter + já foi inserido !!");
        }


    });

    $("#btnSubtracao").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("-");
        if (posicao == -1) {
            //concatena o caracter + na variavel
            texto = texto + "-";

            //atualiza o input
            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter - já foi inserido !!");
        }

    });

    $("#btnDivisao").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("/");
        if (posicao == -1) {
            //concatena o caracter + na variavel
            texto = texto + "/";

            //atualiza o input
            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter / já foi inserido !!");
        }

    });

    $("#btnMultiplicacao").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("*");
        if (posicao == -1) {
            //concatena o caracter + na variavel
            texto = texto + "*";

            //atualiza o input
            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter * já foi inserido !!");
        }

    });

    $("#btnPotenciaQuadrado").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("^");
        if (posicao == -1) {
            //concatena o caracter + na variavel
            texto = texto + "^";

            //atualiza o input
            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter ^ já foi inserido !!");
        }

    });

    $("#btnRaiz").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("√");
        if (posicao == -1) {
            //concatena o caracter + na variavel
            texto = texto + "√";

            //atualiza o input
            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter √ já foi inserido !!");
        }

    });


    $("#btnIgual").click(function () {
        var texto = document.getElementById("inputTexto").value;

        // Identifica a operação
        var posicao_mais = texto.indexOf("+");
        var posicao_menos = texto.indexOf("-");
        var posicao_div = texto.indexOf("/");
        var posicao_multi = texto.indexOf("*");
        var posicao_expo = texto.indexOf("^");
        var posicao_raiz = texto.indexOf("√");

        // Adição
        if (posicao_mais > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_mais));
            var p2 = parseFloat(texto.substring(posicao_mais + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para soma!");
            } else {
                document.getElementById("inputTexto").value = p1 + p2;
            }
        }

        // Subtração
        else if (posicao_menos > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_menos));
            var p2 = parseFloat(texto.substring(posicao_menos + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para subtração!");
            } else {
                document.getElementById("inputTexto").value = p1 - p2;
            }
        }

        // Divisão
        else if (posicao_div > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_div));
            var p2 = parseFloat(texto.substring(posicao_div + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para divisão!");
            } else if (p2 === 0) {
                alert("Divisão por zero não é permitida!");
            } else {
                document.getElementById("inputTexto").value = p1 / p2;
            }
        }

        // Multiplicação
        else if (posicao_multi > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_multi));
            var p2 = parseFloat(texto.substring(posicao_multi + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para multiplicação!");
            } else {
                document.getElementById("inputTexto").value = p1 * p2;
            }
        }

        // Potência
        else if (posicao_expo > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_expo));
            var p2 = parseFloat(texto.substring(posicao_expo + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para potência!");
            } else {
                document.getElementById("inputTexto").value = p1 ** p2;
            }
        }

        // Raiz Quadrada
        else if (posicao_raiz > -1) {
            var p2 = parseFloat(texto.substring(posicao_raiz + 1));
            if (isNaN(p2)) {
                alert("Operador inválido para raiz quadrada!");
            } else if (p2 < 0) {
                alert("Não é possível calcular a raiz de um número negativo!");
            } else {
                document.getElementById("inputTexto").value = Math.sqrt(p2);
            }
        }

        // Operação inválida
        else {
            alert("Operação inválida!");
        }
    });



    // $("#btnIgual").click(function () {

    //     //documentação sobre o método getElementById: https://www.w3schools.com/jsref/met_document_getelementbyid.asp
    //     var texto = document.getElementById("inputTexto").value;

    //     //se a variavel texto contiver o caracter + o método indexOf irá retornar o indice desse caracter
    //     //documentacao sobre o metodo indexOF : https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf

    //     var posicao_mais = texto.indexOf("+");

    //     var posicao_menos = texto.indexOf("-");

    //     var posicao_div = texto.indexOf("/");

    //     var posicao_multi = texto.indexOf("*");

    //     var posicao_expo = texto.indexOf("^");

    //     var posicao_raiz = texto.indexOf("√");

    //     if (posicao_mais > -1) {

    //         //documentacao sobre o método substring: https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/String/substring
    //         //substring: retorna uma nova string a partir de um ponto inicial e final.
    //         var p1 = texto.substring(0, texto.indexOf("+"));
    //         p1 = parseFloat(p1);

    //         var p2 = texto.substring(texto.indexOf("+") + 1, texto.length);
    //         p2 = parseFloat(p2);

    //         if (isNaN(p1) || isNaN(p2)) {
    //             alert("Operadores inválidos !!");
    //         } else {
    //             //atualiza o input
    //             document.getElementById("inputTexto").value = p1 + p2;
    //         }

    //     } else if (posicao_menos > -1) {

    //         var p1 = texto.substring(0, texto.indexOf("-"));
    //         p1 = parseFloat(p1);

    //         var p2 = texto.substring(texto.indexOf("-") + 1, texto.length);
    //         p2 = parseFloat(p2);

    //         if (isNaN(p1) || isNaN(p2)) {
    //             alert("Operadores inválidos !!");
    //         } else {
    //             //atualiza o input
    //             document.getElementById("inputTexto").value = p1 - p2;
    //         }

    //     } else if (posicao_div > -1) {

    //         var p1 = texto.substring(0, texto.indexOf("/"));
    //         p1 = parseFloat(p1);

    //         var p2 = texto.substring(texto.indexOf("/") + 1, texto.length);
    //         p2 = parseFloat(p2);

    //         if (isNaN(p1) || isNaN(p2)) {
    //             alert("Operadores inválidos !!");
    //         } else {
    //             //atualiza o input
    //             document.getElementById("inputTexto").value = p1 / p2;
    //         }

    //     } else if (posicao_multi > -1) {

    //         var p1 = texto.substring(0, texto.indexOf("*"));
    //         p1 = parseFloat(p1);

    //         var p2 = texto.substring(texto.indexOf("*") + 1, texto.length);
    //         p2 = parseFloat(p2);

    //         if (isNaN(p1) || isNaN(p2)) {
    //             alert("Operadores inválidos !!");
    //         } else {
    //             //atualiza o input
    //             document.getElementById("inputTexto").value = p1 * p2;
    //         }

    //     } else if (posicao_expo > -1) {

    //         var p1 = texto.substring(0, texto.indexOf("^"));
    //         p1 = parseFloat(p1);

    //         var p2 = texto.substring(texto.indexOf("^") + 1, texto.length);
    //         p2 = parseFloat(p2);

    //         if (isNaN(p1) || isNaN(p2)) {
    //             alert("Operadores inválidos !!");
    //         } else {
    //             //atualiza o input
    //             document.getElementById("inputTexto").value = p1 ** p2;
    //         }
    //     } if (posicao_raiz > -1) {
    //         var p1 = texto.substring(0, texto.indexOf("√")); // Parte antes do símbolo "√"
    //         p1 = parseFloat(p1); // Converte para número

    //         var p2 = texto.substring(texto.indexOf("√") + 1, texto.length); // Parte após o "√"
    //         p2 = parseFloat(p2); // Converte para número

    //         if (isNaN(p2)) {
    //             alert("Operador inválido para raiz quadrada!");
    //         } else {
    //             // Calcula a raiz quadrada
    //             var resultado = Math.sqrt(p2);

    //             // Atualiza o input com o resultado
    //             document.getElementById("inputTexto").value = resultado;
    //         }
    //     } else {

    //         alert("Operação inválida!");

    //     }

    // });

</script>

</html>