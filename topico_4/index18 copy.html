<html>

<head>
    <meta charset="utf-8">
    <title>Formulário para Calculadora - 18º Exemplo</title>
    <script src="js/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="style/style18.css">
</head>

<body>
    <div class="form">

        <div class="formcontrol">
            <textarea style="resize: none;" rows="5" cols="20" id="taHistorico" readonly></textarea>
        </div>

        <div class="formcontrol">
            <input type="text" value="" id="inputTexto" readonly size="100px">
        </div>
        <div class="formcontrol">
            <input type="button" class="num maincolor" value="7" id="btn7" class="botao">
            <input type="button" class="num maincolor" value="8" id="btn8" class="botao">
            <input type="button" class="num maincolor" value="9" id="btn9" class="botao">
            <input type="button" class="num blue" value="+" id="btnSoma" class="botao">
        </div>
        <div class="formcontrol">
            <input type="button" class="num maincolor" value="4" id="btn4" class="botao">
            <input type="button" class="num maincolor" value="5" id="btn5" class="botao">
            <input type="button" class="num maincolor" value="6" id="btn6" class="botao">
            <input type="button" class="num pin" value="-" id="btnSubtracao" class="botao">
        </div>

        <div class="formcontrol">
            <input type="button" class="num maincolor" value="1" id="btn1" class="botao">
            <input type="button" class="num maincolor" value="2" id="btn2" class="botao">
            <input type="button" class="num maincolor" value="3" id="btn3" class="botao">
            <input type="button" class="num gre" value="/" id="btnDivisao" class="botao">
        </div>
        <div class="formcontrol">
            <input type="button" class="num maincolor" value="0" id="btn0" class="botao">
            <input type="button" class="num maincolor" value="," id="btnVirgula" class="botao">
            <input type="button" class="num maincolor" value="C" id="btnReset" class="botao">
            <input type="button" class="num ora" value="*" id="btnMultiplicacao" class="botao">
        </div>
        <div class="formcontrol">
            <input type="button" class="num pur" value="=" id="btnIgual" style="width: 140px;">

            <input type="button" class="num maincolor" value="X^" id="btnPotenciaQuadrado" class="botao">

            <input type="button" class="num maincolor" value="√" id="btnRaiz" class="botao">

        </div>

    </div>

</body>
<script type="text/javascript">

    $("#btnReset").click(function () {

        document.getElementById("inputTexto").value = "";

    });

    $("#btnVirgula").click(function () {

        var texto = document.getElementById("inputTexto").value;

        texto = texto + ".";

        document.getElementById("inputTexto").value = texto;

    });

    $("#btn0").click(function () {

        var texto = document.getElementById("inputTexto").value;

        texto = texto + "0";

        document.getElementById("inputTexto").value = texto;


    });

    $("#btn1").click(function () {

        var texto = document.getElementById("inputTexto").value;

        texto = texto + "1";

        document.getElementById("inputTexto").value = texto;

    });

    $("#btn2").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "2";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn3").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "3";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn4").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "4";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn5").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "5";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn6").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "6";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn7").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "7";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn8").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "8";
        document.getElementById("inputTexto").value = texto;
    });

    $("#btn9").click(function () {

        var texto = document.getElementById("inputTexto").value;
        texto = texto + "9";
        document.getElementById("inputTexto").value = texto;
    });


    $("#btnSoma").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("+");
        if (posicao == -1) {

            texto = texto + "+";

            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter + já foi inserido !!");
        }


    });

    $("#btnSubtracao").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("-");
        if (posicao == -1) {

            texto = texto + "-";

            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter - já foi inserido !!");
        }

    });

    $("#btnDivisao").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("/");
        if (posicao == -1) {

            texto = texto + "/";

            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter / já foi inserido !!");
        }

    });

    $("#btnMultiplicacao").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("*");
        if (posicao == -1) {

            texto = texto + "*";

            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter * já foi inserido !!");
        }

    });

    $("#btnPotenciaQuadrado").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("^");
        if (posicao == -1) {
            texto = texto + "^";

            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter ^ já foi inserido !!");
        }

    });

    $("#btnRaiz").click(function () {

        var texto = document.getElementById("inputTexto").value;

        var posicao = texto.indexOf("√");
        if (posicao == -1) {
            texto = texto + "√";

            document.getElementById("inputTexto").value = texto;
        } else {

            alert("Caracter √ já foi inserido !!");
        }

    });


    $("#btnIgual").click(function () {
        var texto = document.getElementById("inputTexto").value;

        var posicao_mais = texto.indexOf("+");
        var posicao_menos = texto.indexOf("-");
        var posicao_div = texto.indexOf("/");
        var posicao_multi = texto.indexOf("*");
        var posicao_expo = texto.indexOf("^");
        var posicao_raiz = texto.indexOf("√");

        if (posicao_mais > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_mais));
            var p2 = parseFloat(texto.substring(posicao_mais + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para soma!");
            } else {
                document.getElementById("inputTexto").value = p1 + p2;
                document.getElementById("taHistorico").value = 
                document.getElementById("taHistorico").value + "\n" + p1 + " + " + p2 + " = " + (p1 + p2);
            }
        } else if (posicao_menos > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_menos));
            var p2 = parseFloat(texto.substring(posicao_menos + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para subtração!");
            } else {
                document.getElementById("inputTexto").value = p1 - p2;
                document.getElementById("taHistorico").value = 
                document.getElementById("taHistorico").value + "\n" + p1 + " - " + p2 + " = " + (p1 - p2);

            }
        } else if (posicao_div > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_div));
            var p2 = parseFloat(texto.substring(posicao_div + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para divisão!");
            } else if (p2 === 0) {
                alert("Divisão por zero não é permitida!");
            } else {
                document.getElementById("inputTexto").value = p1 / p2;
                document.getElementById("taHistorico").value = 
                document.getElementById("taHistorico").value + "\n" + p1 + " / " + p2 + " = " + (p1 / p2);

            }
        } else if (posicao_multi > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_multi));
            var p2 = parseFloat(texto.substring(posicao_multi + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para multiplicação!");
            } else {
                document.getElementById("inputTexto").value = p1 * p2;
                document.getElementById("taHistorico").value = 
                document.getElementById("taHistorico").value + "\n" + p1 + " * " + p2 + " = " + (p1 * p2);

            }
        } else if (posicao_expo > -1) {
            var p1 = parseFloat(texto.substring(0, posicao_expo));
            var p2 = parseFloat(texto.substring(posicao_expo + 1));
            if (isNaN(p1) || isNaN(p2)) {
                alert("Operadores inválidos para potência!");
            } else {
                document.getElementById("inputTexto").value = p1 ** p2;
                document.getElementById("taHistorico").value = 
                document.getElementById("taHistorico").value + "\n" + p1 + " ^ " + p2 + " = " + (p1 ** p2);

            }
        } else if (posicao_raiz > -1) {
            var p2 = parseFloat(texto.substring(posicao_raiz + 1));
            if (isNaN(p2)) {
                alert("Operador inválido para raiz quadrada!");
            } else if (p2 < 0) {
                alert("Não é possível calcular a raiz de um número negativo!");
            } else {
                document.getElementById("inputTexto").value = Math.sqrt(p2);
                document.getElementById("taHistorico").value = 
                document.getElementById("taHistorico").value + "\n" + " √ " + p2 + " = " + Math.sqrt(p2);

            }
        } else {
            alert("Operação inválida!");
        }
    });
</script>

</html>